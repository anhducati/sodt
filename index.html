<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SĐT & Biển Số Ảo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #f0f4f8;
      padding: 30px;
    }
    .container {
      max-width: 650px;
      margin: auto;
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
    }
    .item {
      background: #f1f5f9;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 8px;
    }
    .copy-btn {
      margin-left: 5px;
    }
    .toast-container {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 1055;
    }
  </style>
</head>
<body>
  <div class="container">
    <h3 class="text-center mb-4">🔢 Sinh SĐT & Biển Số Ảo</h3>

    <label class="form-label">Chọn nhà mạng:</label>
    <select id="carrier" class="form-select mb-2">
      <option value="Viettel">Viettel</option>
      <option value="Vinaphone">Vinaphone</option>
      <option value="Mobifone">Mobifone</option>
      <option value="Vietnamobile">Vietnamobile</option>
      <option value="Gmobile">Gmobile</option>
    </select>

    <div class="form-check mb-2">
      <input class="form-check-input" type="checkbox" id="randomizeCarrier" />
      <label class="form-check-label" for="randomizeCarrier">🔀 Trộn tất cả nhà mạng</label>
    </div>

    <label for="count" class="form-label">Số lượng:</label>
    <input type="number" id="count" class="form-control mb-3" value="5" min="1" max="100" />

    <button class="btn btn-primary w-100 mb-3" onclick="generate()">🎲 Sinh dữ liệu</button>

    <div id="result"></div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastContainer"></div>

  <script>
    const prefixes = {
      Viettel: ["032", "033", "034", "035", "036", "037", "038", "039", "086"],
      Vinaphone: ["081", "082", "083", "084", "085", "088", "091", "094"],
      Mobifone: ["070", "076", "077", "078", "079", "089", "090", "093"],
      Vietnamobile: ["052", "056", "058", "092"],
      Gmobile: ["059", "099"],
    };

    const platePrefixes = ["36AG", "36AD", "36AB", "36AS", "36AK", "36AM", "36AN", "36AX"];

    function generate() {
      const carrierSelect = document.getElementById("carrier").value;
      const isRandomCarrier = document.getElementById("randomizeCarrier").checked;
      const count = parseInt(document.getElementById("count").value);
      const result = document.getElementById("result");
      result.innerHTML = "";

      let allPrefixes = [];
      if (isRandomCarrier) {
        // gom tất cả prefix
        Object.values(prefixes).forEach(arr => allPrefixes = allPrefixes.concat(arr));
      }

      for (let i = 0; i < count; i++) {
        const phonePrefix = isRandomCarrier
          ? allPrefixes[Math.floor(Math.random() * allPrefixes.length)]
          : prefixes[carrierSelect][Math.floor(Math.random() * prefixes[carrierSelect].length)];

        const phoneNum = phonePrefix + Math.floor(1000000 + Math.random() * 9000000);

        const platePfx = platePrefixes[Math.floor(Math.random() * platePrefixes.length)];
        const numberPart = Math.floor(100 + Math.random() * 900);
        const tailPart = String(Math.floor(Math.random() * 100)).padStart(2, '0');
        const plateNum = `${platePfx} - ${numberPart}.${tailPart}`;

        const item = document.createElement("div");
        item.className = "item d-flex justify-content-between align-items-center flex-wrap";

        item.innerHTML = `
          <div>
            📱 <strong>${phoneNum}</strong>
            <button class="btn btn-sm btn-outline-secondary copy-btn" onclick="copyToClipboard('${phoneNum}', 'SĐT')">Sao chép SĐT</button><br>
            🚘 <strong>${plateNum}</strong>
            <button class="btn btn-sm btn-outline-secondary copy-btn" onclick="copyToClipboard('${plateNum}', 'Biển số')">Sao chép BS</button>
          </div>
        `;
        result.appendChild(item);
      }
    }

    function copyToClipboard(text, label) {
      navigator.clipboard.writeText(text)
        .then(() => showToast(`${label} đã sao chép: ${text}`))
        .catch(() => showToast("❌ Không thể sao chép", true));
    }

    function showToast(message, isError = false) {
      const toastContainer = document.getElementById("toastContainer");
      const toast = document.createElement("div");
      toast.className = `toast align-items-center text-white ${isError ? 'bg-danger' : 'bg-success'} border-0`;
      toast.setAttribute("role", "alert");
      toast.setAttribute("aria-live", "assertive");
      toast.setAttribute("aria-atomic", "true");
      toast.innerHTML = `
        <div class="d-flex">
          <div class="toast-body">${message}</div>
        </div>
      `;
      toastContainer.appendChild(toast);

      const bsToast = new bootstrap.Toast(toast, { delay: 1500 });
      bsToast.show();

      // Tự xóa toast khỏi DOM sau khi tắt
      toast.addEventListener('hidden.bs.toast', () => {
        toast.remove();
      });
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
